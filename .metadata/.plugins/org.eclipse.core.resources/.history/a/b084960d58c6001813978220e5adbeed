package ExercisisM6Metadata1;

import java.io.File;
import java.text.SimpleDateFormat;

public class Main {
	public static void main(String[] args) {
	    // Local variable
	    int swValue;
	    String path;
	    path = Keyin.inString("Inserte la ruta del archivo o directorio: ");
	    File file = new File(path);
	    // Display menu graphics
	    System.out.println("=====================================================================");
	    System.out.println("|   MENU SELECTION DEMO    						");
	    System.out.println("=====================================================================");
	    System.out.println("| Options:                 						");
	    System.out.println("|        1. Display file's lenght       		");
	    System.out.println("|        2. Dispaly file's last modified date   ");
	    System.out.println("|        3. Create Directory			        ");
	    System.out.println("|        4. list the elements inside the directory		            ");
	    System.out.println("|        5. Rename			           								");
	    System.out.println("|        6. Display permissions			    				        ");
	    System.out.println("|        7. Set read-only attribute						            ");
	    System.out.println("=====================================================================");
	    swValue = Keyin.inInt(" Select option: ");

	    // Switch construct
	    switch (swValue) {
	    case 1:
	    	System.out.println("Option 1 selected");
	    	if (file.exists()) {
	    		System.out.println(file.length() + " bytes");
	    	} else {
	    		System.out.println("El fichero no existe");
	    	}
	      	break;
	    case 2:
	    	System.out.println("Option 2 selected");
	    	if (file.exists()) {
	    		SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
	    		System.out.println(sdf.format(file.lastModified()));
	    	} else {
	    		System.out.println("El fichero no existe");
	    	}
	      	break;
	    case 3:
	    	System.out.println("Option 3 selected");
	    	//System.out.println(file.mkdir());
	    	if(!file.exists()){
				// create the folder
				boolean result = file.mkdir();
				if(result){
					System.out.println("Successfully created "+file.getAbsolutePath());
				}
				else{
					System.out.println("Failed creating "+file.getAbsolutePath());
				}
			}
		  	break;
	    case 4:
	    	System.out.println("Option 4 selected");
	    	if (file.exists()) {
	    		File[] listOfFiles = file.listFiles();
	    		for (int i = 0; i < listOfFiles.length; i++) {
	    			  if (listOfFiles[i].isFile()) {
	    				  System.out.println("Archivo " + listOfFiles[i].getName());
	    			  } else if (listOfFiles[i].isDirectory()) {
	    				  System.out.println("Directorio " + listOfFiles[i].getName());
	    			  }
	    		}
	    	} else {
	    		System.out.println("El fichero no existe");
	    	}
		    break;
	    case 5:
		    System.out.println("Option 5 selected");
		    String[] newPath = path.split("/");
		    String newName = Keyin.inString(" Select a new name: ");
			File newfile =new File(newName);	
			if(file.renameTo(newfile)){
				System.out.println("Rename succesful");
			}else{
				System.out.println("Rename failed");
			}
	    	
		    break;
	    case 6:
		    System.out.println("Option 6 selected");
		    if (file.exists()) {
		    	System.out.println("Executable: " + file.canExecute()); 
	            System.out.println("Readable: " + file.canRead()); 
	            System.out.println("Writable: "+ file.canWrite()); 
		    }
		    break;
	    case 7:
	    	System.out.println("Option 7 selected");
	    	if (file.exists()) {
	    		file.setReadOnly();
	    	}
	    	break;
	    default:
	      System.out.println("Invalid selection");
	      break; 
	    }
	  }
}
